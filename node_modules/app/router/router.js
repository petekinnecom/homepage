Parser = require('app/router/parser');

var environment = 'local';
var resources = [
  'articles',
];

function Router(controllers){
  this.parser = new Parser(environment, resources);
  this.controllers = controllers;
  window.addEventListener("hashchange", this.routeEvent.bind(this));

  this.route(window.location.href);
}

Router.prototype.routeEvent = function(event){
  this.route(event.newURL);
};
Router.prototype.route = function(url){
  var resource = this.parser.parse(url);

  this.controllers[resource.name].load(resource.id);
};

module.exports = Router;

