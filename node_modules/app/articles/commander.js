var commandRegistry = require('app/terminal/commands/registry');
var terminal = require('app/terminal/model');
var articles = require('app/articles/cache_machine/article_list');

function Commander(router){
  var routeToArticle = function(match) {
    var id = match[1];

    if (id === 'list') {
      articles.forEach(function(a){
        terminal.log(a);
      });
    }
    else {
      terminal.log('Routing to article ' + id);

      router.push({
        controller: 'articles',
        id: id
      });
    }
  };

  var command = commandRegistry.register({
    matcher: /^article (.*)/,
    fn: routeToArticle,
  });
}

module.exports = Commander;
