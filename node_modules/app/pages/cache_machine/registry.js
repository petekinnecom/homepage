var HiddenDivLoader = require('app/pages/cache_machine/loaders/hidden_div_loader');
var Downloader = require('app/pages/cache_machine/loaders/downloader');
var pages = require('app/pages/cache_machine/pages');

var downloaders = {};

pages.forEach(function(page){
  var divLoader = new HiddenDivLoader(page);

  if (divLoader.canLoad()) {
    downloaders[page.id] = divLoader;
  }
  else {
    downloaders[page.id] = new Downloader(page);
  }
});

module.exports = downloaders;
