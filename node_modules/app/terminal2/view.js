var $ = require('jquery');
var terminal = require('app/terminal2/model');

var $body;
var time = 2100;

function View(body){
  $body = body;

  terminal.events.on('stateChanged', resize.bind(this));
}

var resize = function(){
  setState(terminal.state);
};

var setState = function(state){
  var deferred = $.Deferred();

  $body.attr('data-terminal-state', state);

  setTimeout(function(){
    deferred.resolve(state);
  }, time);

  return deferred.promise();
};

module.exports = View;
