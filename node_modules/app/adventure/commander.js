var Processor = require('app/terminal/processor');
var terminal = require('app/terminal/model');

function Commander(router){
  var beginAdventure = function(match){

    terminal.log('beginning adventure.');

    processor = new Processor('adventure');

    processor.registerCommand({
      matcher: /.*/,
      fn: function(input){
        terminal.log('you typed: ' + input);
        if (input=='q'){
          terminal.warn('closing');
          return false;
        }

        return processor;
      },
    });

    return processor;
  };

  terminal.registerCommand({
    matcher: /^a$/,
    fn: beginAdventure,
  });
}

module.exports = new Commander();
