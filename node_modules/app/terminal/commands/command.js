
function Command(options){
  this.matcher = options.matcher;
  this.fn = options.fn;
  this.response = options.response;
}

Command.prototype.isHandler = function(input){
  return !!handle.call(this, input);
};

Command.prototype.run = function(input) {
  var match, response;
  match = handle.call(this, input);

  this.fn(match);

  if (typeof this.response === "function") {
    response = this.response(match);
  }
  else {
    response = this.response;
  }

  return response;
};

//private, must be bound

var handle = function(input){
  if (this.matcher instanceof RegExp) {
    return input.match(this.matcher);
  }
  else {
    return this.matcher(input);
  }

};

module.exports = Command;
