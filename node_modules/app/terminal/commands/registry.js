var Command = require('app/terminal/commands/command');

function Registry(){
  this.commands = [];
}

// for convenience, let callers register command directly
// using this method
Registry.prototype.register = function(commandOrArgs){
  var command;

  if (commandOrArgs instanceof Command){
    command = commandOrArgs;
  }
  else {
    command = new Command(commandOrArgs);
  }

  this.commands.push(command);
};

Registry.prototype.findHandler = function(input){
  // use for loop in order to short circuit on 
  // first match
  for (var i=0; i<this.commands.length; i++){
    var command = this.commands[i];

    if (command.isHandler(input)){
      return command;
    }
  }

  throw {
    message: 'No handlers found'
  };
};

//singleton
module.exports = Registry;
