"use strict";

var Prompt = require('app/terminal/input/prompt/model');
var terminal = require('app/terminal/model');

var View = require('app/terminal/view');
var InputController = require('app/terminal/input/controller');
var OutputController = require('app/terminal/output/controller');

var $ = require('jquery');

var ClickHandler = require('app/terminal/controls/click_handler.js');

var inTerminalView;

function Controller($el, mobileController){
  new InputController($el, terminal.input);
  new OutputController($el.find('.terminal-output'), terminal.output);

  new View($('body'));

  var clickHandler = new ClickHandler(mobileController);

  $(document).on('click', function(event){
    clickHandler.handle(inTerminalView(event.target));
  });

}

inTerminalView = function(el){
 return $.contains( $('.terminal')[0], el) ||  ( $('.terminal')[0] == el );
};

module.exports = Controller;
