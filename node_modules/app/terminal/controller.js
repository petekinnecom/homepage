var OutputView = require('app/terminal/output/view');
var InputView = require('app/terminal/input/view');
var terminal = require('app/terminal/model');

var $ = require('jquery');

function Controller($container){
  // terminal/model is a singleton, so not
  // much to do here.

  var $output, $input, outputView, inputView, $hiddenInput;

  $output = $container.find('.terminal-output');

  $input = $container.find('.terminal-input');
  $hiddenInput = $container.find('.terminal-input--hidden');

  outputView = new OutputView($output);
  inputView = new InputView($input, $hiddenInput);
  window.inputView = inputView;

  $input.focus();

  $container.on('focus', function(event){
    $input.focus();
  });

  //TODO: This should be in a 'link hijacker'
  // that can talk to a terminal bot, that can
  // type things for us!
  $(document).on('click', 'a', function(event){
    terminal.input('article ' + event.target.innerText);
  });
}

module.exports = Controller;
