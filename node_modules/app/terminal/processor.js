var EventEmitter = require('events').EventEmitter;
var commandRegistry = require('app/terminal/commands/registry');

function Processor(){
  this.events = new EventEmitter();
  this.process = this.process.bind(this);
}

Processor.prototype.process = function(input){
  var response;

  try {
    var handler = commandRegistry.findHandler(input);
    response = handler.run(input);
  }
  catch(e) {
    response = e.message;
  }

  this.events.emit('processed', input, response);
};

module.exports = Processor;
