EventEmitter = require('events').EventEmitter;

function Model(processor){
  processor.events.on('input', this.addInput.bind(this));
  processor.events.on('output', this.addOutput.bind(this));
  this.events = new EventEmitter();
  this.lines = [];
}

Model.prototype.addInput = function(input) {

  var line = {
    type: 'input',
    text: input,
  };

  add.call(this, line);
};

Model.prototype.addOutput = function(output) {

  var line = {
    type: 'output',
    text: output,
  };

  add.call(this, line);
};

//private, must be bound

var add = function(line) {
  this.lines.push(line);
  this.events.emit('lineAdded', line);
};

module.exports = Model;
