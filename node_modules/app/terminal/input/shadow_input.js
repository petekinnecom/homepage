var EventEmitter = require('events').EventEmitter;

function ShadowInput($el){
  this.$el = $el;
  this.events = new EventEmitter();
  this.$el.on('focus', this.placeCaretAtEnd.bind(this));
}

ShadowInput.prototype.placeCaretAtEnd = function() {
  var el = this.$el[0];
  if (typeof window.getSelection != "undefined" && typeof document.createRange != "undefined") {
    var range = document.createRange();
    range.selectNodeContents(el);
    range.collapse(false);
    var sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
  }
  else if (typeof document.body.createTextRange != "undefined") {
    var textRange = document.body.createTextRange();
    textRange.moveToElementText(el);
    textRange.collapse(false);
    textRange.select();
  }
};

module.exports = ShadowInput;
